<!DOCTYPE html>
<html lang="en">
<head>
	<title>Formaldehyde Molecule</title>
	<meta charset="utf-8">

	<link rel="stylesheet" href="css/style.css">
	<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
	<script src="js/three.js"></script>
	<script src="js/OrbitControls.js"></script>
	<script src="js/formaldehyde.js"></script>
	
	<style type="text/css">
		canvas { 
		width:100%; 
		height: 100%; 
	}
	</style>
</head>
<body>
	<link rel="stylesheet" href="css/style.css">
	<div id="container" style="background-color: #ffffff">
		
		<div id="top-bar"><!--top bar starts-->
			<table>
				<tr>
						<td><img src="images/iiith-logo.png" height="90px"/></td>
				</tr>
			</table>
		</div><!--top bar ends-->
		
		
		<div id="header"><!--header starts-->
			<ul id="list-nav" style="padding-left: 50px">
				<li><a href="../../" style="border-top-left-radius:0.8em;border-bottom-left-radius:0.8em; ">HOME</a></li>
				<li><a href="water.html">WATER</a></li>
				<li><a href="ammonia.html">AMMONIA</a></li>
				<li><a href="formaldehyde.html">FORMALDEHYDE</a></li>
				<li><a href="methane.html">METHANE</a></li>
				<li><a href="benzene.html">BENZENE</a></li>
				<li><a href="c-60.html">C-60</a></li>				

				<!--
				<li id="blank">LOGIN</li>
				<li><a href="#">Student</a></li>-->
				<li><a href="#" style="border-top-right-radius:0.8em;border-bottom-right-radius:0.8em;padding-left:00px ">EXP 4</a></li>
				
			</ul>
		</div><!--header ends-->

		
		<div id="simulator-stuff">
			<table>
				<tr align="center">
					<td >
						<img src="images/Formaldehyde.png" height=350px width=350px/>	
						<p style="font-size: 15px">Follow the convertion of the atom ordering</p>
					</td>
					<td>
						<br><br><br>      <article id="simulator"></article>
					</td>
					<td align="justify" style="padding-left:100px">
						<form name="control_options" id="control_options">
							<input type="radio" class="spacefill" name="spacefill" value="90 80 50 " checked>spacefill 20%<br>
							<input type="radio" class="spacefill" name="spacefill" value="120 110 70">spacefill 25%<br>
							<input type="radio" class="spacefill" name="spacefill" value="140 130 90">spacefill 50%<br>
							<input type="radio" class="spacefill" name="spacefill" value="170 160 110">spacefill 75%<br>
							<br><br>

							<input type="radio" class="wireframe" name="wireframe" value="0 0">wireframe off<br>
							<input type="radio" class="wireframe" name="wireframe" value="5 2">wireframe on <br>
							<input type="radio" class="wireframe" name="wireframe" value="10 6" checked="">wireframe 0.1<br>
							<input type="radio" class="wireframe" name="wireframe" value="30 15">wireframe 0.3<br>
							<br><br>

							<input type="checkbox" id="spin" value="spin" >spin
						</form>
					</td>
				</tr>

				<tr>
				<td colspan="2" align="center">
					<br><br><br>
						<p style="font-size: 24px;color: #000000;font-weight: 700;padding-left: 350px">Z-matrix calculation</p>		
					</td>
				</tr>
			</table>

			<div id="calculation" >

			</div>	

				
				<p style="font-size: 15px;padding-left: 350px">Choose atoms According to numbering provided in figure</p>	
				<p id="result"> </p>
		</div>


		

	<!--footer starts (manual)-->
		<div style="position:absolute;bottom: 10px">
		<img src="images/ma-hrline.jpg" style="padding-left:15px;width:1220px;height:4px;"/>
		<table >
			<tr>
				<td id="recent" >
						<span style="padding-left:10px;">Manual</span>
						<div style="padding-left:20px;font-size:13px;color:#878787;">
							<br/>
						    a) Select a molecule from above by clicking on it.<br/>
						    b) Fill the atom connectivity to generate the z-matrix for the selected molecule. <br/>
						    c) The next slide shows the method and  basis set for the optimization.<br/>
						    d) The slide that follows shows the GAMESS input file for the selected molecule.<br/>
				   		    e) Upon running GAMESS, the output file for the geometry optimization is displayed.<br/>
						    f) The last slide shows how the structure varies as a function of energy.<br/>	
						</div>			
				</td>
				<td><img src="images/vert.jpeg" style="width:4px;height:170px;align:top"/></td>
				<td style="padding-left:20px"><img width="90px" height="100px" src="images/molecule.gif"/></td>
				<td style="padding-left:20px;font-size:13px;font-style: italic;" width="320px">
					Different kinds of calculations require different kinds of input. But some items are to be specified in all the cases. The two most popular computer programs for carrying out ab initio quantum chemical calculations is the "Gaussian" and "Gamess" series. 
					<br/><br/>
					<a href="../index.html" target="_blank" style="font-size:14px;color:#FFCC00;text-decoration:none;float:right">Read More&gt;&gt;</a>
				</td>
			</tr>
			</table>
		<img src="images/ma-hrline.jpg" style="padding-left:15px;width:1220px;height:4px;"/>
		<img src="images/ma-footer.jpg" style="padding-left:15px;width:1220px;height:35px;"/>
		
		</div>		<!--footer ends -->
	
	</div>

	<script type="text/javascript">
		
	// Camera, Scene, Renderer

		var camera = new THREE.PerspectiveCamera(35, (window.innerWidth/4) / (window.innerHeight/2), 0.1, 3000);
		var scene = new THREE.Scene();
		
		var renderer = new THREE.WebGLRenderer();
		renderer.setPixelRatio(window.devicePixelRatio);
		renderer.setSize(window.innerWidth/4, window.innerHeight/2);
		document.getElementById('simulator').appendChild(renderer.domElement);

		//var controls = new THREE.OrbitControls(camera, renderer.domElement);

		
	//initial dimensions
		var C_radius = 90;
		var O_radius = 80;
		var H_radius = 50;
		var bond_radius = 10;
		var bond_radius_oxy = 6;
		molecule(C_radius, O_radius, H_radius, bond_radius, bond_radius_oxy);

	//update the controls
		document.control_options.onclick =  function (){
		    var sp = document.control_options.spacefill.value.split(" ");
		    var wr = document.control_options.wireframe.value.split(" "); 
		    scene.remove.apply(scene, scene.children);  
			molecule(sp[0],sp[1],sp[2],wr[0],wr[1]);			
		}

	//Creating molecule
		function molecule(C_radius, O_radius, H_radius, bond_radius, bond_radius_oxy){
			
		//light on the screen
			var light = new THREE.AmbientLight(0xffffff, 0.5);
			scene.add(light);
			var light1 = new THREE.PointLight(0xffffff, 0.5);
			scene.add(light1);

		//Creating atoms
			var carbon_Geo = new THREE.SphereGeometry( C_radius, 50, 200 ); //Geometry
			var oxygen_Geo = new THREE.SphereGeometry( O_radius, 50, 200 ); //Geometry
			var hydrogen_Geo = new THREE.SphereGeometry( H_radius, 50, 200 );

			var hydrogen_material = new THREE.MeshPhongMaterial({color: '#C0C0C0'}); //Material
			var oxygen_material = new THREE.MeshPhongMaterial({color: 'red'}); 
			var carbon_material = new THREE.MeshPhongMaterial({color: 'yellow'}); 

			var hydrogen_mesh= new THREE.Mesh(hydrogen_Geo, ); //Mesh
			var oxygen_mesh = new THREE.Mesh(oxygen_Geo, );
			var carbon_mesh = new THREE.Mesh(carbon_Geo, );

		//Adjusting the position (matrix)
			carbon_mesh.updateMatrix();
			oxygen_mesh.position.y=230;
			oxygen_mesh.updateMatrix();
			hydrogen_mesh.position.y=230;
			hydrogen_mesh.updateMatrix();

		//Creating Bonds
			var bond_Geo = new THREE.CylinderGeometry( bond_radius, bond_radius, 200, 32);
			var bond_mesh = new THREE.Mesh(bond_Geo, );
			var bond_Geo_oxy1 = new THREE.CylinderGeometry( bond_radius_oxy, bond_radius_oxy , 200, 32);
			var bond_mesh_oxy1 = new THREE.Mesh(bond_Geo_oxy1, );
			var bond_Geo_oxy2 = new THREE.CylinderGeometry( bond_radius_oxy, bond_radius_oxy , 200, 32);
			var bond_mesh_oxy2 = new THREE.Mesh(bond_Geo_oxy2, );
			
			bond_mesh.position.y=120;
			bond_mesh_oxy1.position.y=120;
			bond_mesh_oxy2.position.x=0;
			bond_mesh_oxy2.position.y=120;
			bond_mesh_oxy2.position.x=15;
			
			bond_mesh.updateMatrix();
			bond_mesh_oxy1.updateMatrix();
			bond_mesh_oxy2.updateMatrix();

			//Merging bond and Hydrogen atoms
			var temp1 = new THREE.Geometry();
			temp1.merge(hydrogen_mesh.geometry, hydrogen_mesh.matrix);
			temp1.merge(bond_mesh.geometry, bond_mesh.matrix);

			//Merging bonds and Oxygen atom
			var temp = new THREE.Geometry();
			temp.merge(oxygen_mesh.geometry, oxygen_mesh.matrix);
			temp.merge(bond_mesh_oxy1.geometry, bond_mesh_oxy1.matrix);
			temp.merge(bond_mesh_oxy2.geometry, bond_mesh_oxy2.matrix);

			// Oxygen atom without bonds
			var temp2 = new THREE.Geometry();
			oxygen_mesh.position.y=0;
			oxygen_mesh.updateMatrix();
			temp2.merge(oxygen_mesh.geometry, oxygen_mesh.matrix);

			
			//O+2bonds
			var temp_oxy = new THREE.Mesh(temp, );
			//O without bonds
			var temp_oxy_without_bonds = new THREE.Mesh(temp2, );
			
			
			//H2+bond
			var temp_mesh = new THREE.Mesh(temp1, );
			temp_mesh.applyMatrix( new THREE.Matrix4().makeRotationZ( Math.PI / 1.3 ) );
			temp_mesh.applyMatrix( new THREE.Matrix4().makeRotationY( -Math.PI / 1 ) );
			
			//H1+bond
			var temp_mesh1 = new THREE.Mesh(temp1, );
			temp_mesh1.applyMatrix( new THREE.Matrix4().makeRotationZ( -Math.PI/ 1.3 ) );
			temp_mesh1.applyMatrix( new THREE.Matrix4().makeRotationY( Math.PI / 1 ) );
			
            //Merging the atoms 
			var geo=new THREE.Geometry();

			if(calc==0 || calc==4){
				
				//whole molecule
				geo.merge(temp_oxy.geometry,temp_oxy.matrix,0);
				geo.merge(temp_mesh1.geometry,temp_mesh1.matrix,1);
				geo.merge(temp_mesh.geometry,temp_mesh.matrix,2);
				geo.merge(carbon_mesh.geometry,carbon_mesh.matrix,3);

				var mesh = new THREE.Mesh(geo, new THREE.MeshFaceMaterial([oxygen_material,hydrogen_material,hydrogen_material,carbon_material]));
			}

			else if(calc==1){
				// O atom
				geo.merge(temp_oxy_without_bonds.geometry,temp_oxy_without_bonds.matrix);
				var mesh = new THREE.Mesh(geo,oxygen_material);

			}

			else if(calc==2){
				// C atom and O atom
				geo.merge(temp_oxy.geometry,temp_oxy.matrix,0);
				geo.merge(carbon_mesh.geometry,carbon_mesh.matrix,1);
				var mesh = new THREE.Mesh(geo, new THREE.MeshFaceMaterial([oxygen_material,carbon_material]));
			}

			else if(calc==3){
				// C atom, O atom and 1 H atoms
				geo.merge(temp_oxy.geometry,temp_oxy.matrix,0);
				geo.merge(temp_mesh.geometry,temp_mesh.matrix,1);
				geo.merge(carbon_mesh.geometry,carbon_mesh.matrix,2);
				var mesh = new THREE.Mesh(geo, new THREE.MeshFaceMaterial([oxygen_material,hydrogen_material,nitrogen_material]));
			}

			
			scene.add(mesh);
			mesh.position.set(0,50,-1200);

			
		//Animate
			var animate= function() {
			    requestAnimationFrame( animate );
			  	renderer.render( scene, camera );

				render();
			}

			function render(){
				if(document.getElementById('spin').checked==true){			
					mesh.rotation.y+=0.03;
				}
					
			}
			
			animate();
		}

		// Event Listener (on screen resize)
	  	window.addEventListener( 'resize', onWindowResize, false );

		// Resize
		function onWindowResize() {
			camera.aspect = window.innerWidth / window.innerHeight;
			camera.updateProjectionMatrix();
			renderer.setSize( window.innerWidth/4, window.innerHeight/2 );
		}

	</script>
	
</body>
</html>